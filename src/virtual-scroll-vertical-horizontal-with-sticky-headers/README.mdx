# virtual-scroll-vertical-horizontal-with-sticky-headers

- 一筋縄では行かなかった。`https://github.com/sojinantony01/react-spread-sheet` を参考にした
- **使用技術**
  - sticky:
    - CSS の `position: sticky`
  - 仮想スクロール:
    - 表示範囲だけ描画（ヘッダー、データ共に）
    - 表示範囲外は、でかい空のスペーサーを表示
    - スクロールに合わせて、表示範囲を動的に更新
      - rAF で描画範囲の更新をスロットリング
- **Canvas 版の場合**
  - 仮想スクロールは ↑ と同じ原理
  - Sticky ヘッダーは、クリッピングで実現
    - `ctx.clip()` でヘッダー領域に描画を制限
    - `ctx.save()` と `ctx.restore()` でクリッピングの開始と終了を制御
  - 描画が html じゃなく Canvas になっている
    - クリック位置からセル位置を計算するのが Canvas の座標で特定する感じになる

## 実現しているライブラリ例

- https://github.com/handsontable/handsontable
- https://github.com/walkframe/gridsheet
- https://github.com/sojinantony01/react-spread-sheet
